<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>EasyOpt documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
<style type="text/css">/*<![CDATA[*/
.source-csharp {line-height: normal;}
.source-csharp li, .source-csharp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for csharp
 * CSS class: source-csharp, CSS id:
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-csharp .de1, .source-csharp .de2 {font-family: 'Courier New', Courier, monospace; font-weight: normal; font-style: normal;}
.source-csharp  {}
.source-csharp .head {}
.source-csharp .foot {}
.source-csharp .imp {font-weight: bold; color: red;}
.source-csharp li, .source-csharp li.li1 {font-weight: normal;}
.source-csharp li.li2 {font-weight: bold;}
.source-csharp .kw1 {color: #0600FF;}
.source-csharp .kw2 {color: #FF8000; font-weight: bold;}
.source-csharp .kw3 {color: #008000;}
.source-csharp .kw4 {color: #377B00;}
.source-csharp .kw5 {color: #000000;}
.source-csharp .co1 {color: #666666; font-style: italic;}
.source-csharp .co2 {color: #666666;}
.source-csharp .co3 {color: #666666;}
.source-csharp .coMULTI {color: #008080; font-style: italic;}
.source-csharp .es0 {color: #008080; font-weight: bold;}
.source-csharp .br0 {color: #000000;}
.source-csharp .sy0 {color: #008000;}
.source-csharp .st0 {color: #975026;}
.source-csharp .nu0 {color: #FF0000;}
.source-csharp .me1 {color: #0000FF;}
.source-csharp .me2 {color: #0000FF;}
.source-csharp .ln-xtra, .source-csharp li.ln-xtra, .source-csharp div.ln-xtra {color: #cc0; background-color: #ffc;}
/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
pre {
	background-color:#F9F9F9;
	border:1px dashed #2F6FAB;
	color:black;
	line-height:1.1em;
	padding:1em;
}
.code {
	color:black;
	font-family: 'Courier New', Courier, monospace; font-weight: normal; font-style: normal;
}
/*]]>*/
</style>

</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">

<h1>Configuring options</h1>
<h2>Contents of this document</h2>
<ul>
	<li><a href="#options">Options</a>
		<ul>
			<li><a href="#names">Assigning names</a></li>
		</ul>
	</li>
	<li><a href="#parameters">Parameters</a></li>
	<li><a href="#constraints">Constraints</a></li>
</ul>

<p>Program options are configured with three types of object &mdash; options, parameters and constraints.</p>
<h2 id="options">Options</h2>
<p>
	Each option is represented by an instance of generic class <span class="code">Option&lt;T&gt;</span>.
	To create an instance of <span class="code">Option&lt;T&gt;</span>, use factory methods provided by <span class="code">OptionFactory</span>.
</p>
<p>
	There are two basic types of options: with and without an option parameter.
</p>
<p>
	To create an option without a parameter, you simply call <span class="code">OptionFactory.Create()</span> with two arguments &mdash;
	the first one specifies whether the option is required (<span class="code">true</span>) or optional (<span class="code">false</span>),
	the second one contains option description for usage text. Example:
</p>
<pre class="source-csharp">var verbose <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Be more verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>
	In order to create an option with a parameter, you need to create instance of  class <span class="code">Parameter&lt;T&gt;</span>. For example
</p>
<pre class="source-csharp">var lineWidthParam <span class="sy0">=</span> <span class="kw3">new</span> IntParameter<span class="br0">&#40;</span><span class="kw1">true</span>, <span class="st0">&quot;WIDTH&quot;</span>, <span class="nu0">80</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>
	For more information see <a href="#parameters">Parameters</a>.
</p>
<p>
	Option object with a parameter is created the same way as in case of an option without a parameter, but you pass <span class="code">Parameter&lt;T&gt;</span>
	object as the third argument of <span class="code">OptionFactory.Create()</span>. This method is generic, but thanks to type inference in C# you don't need
	to specify the type explicitely. Thus the following two lines of code are equivalent:
</p>
<pre class="source-csharp">
var lineWidth <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Wrap lines at WIDTH&quot;</span>, lineWidthParam<span class="br0">&#41;</span><span class="sy0">;</span>
Option&lt;<span class="kw4">int</span>&gt; lineWidth <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span>&lt;<span class="kw4">int</span>&gt;<span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Wrap lines at WIDTH&quot;</span>, lineWidthParam<span class="br0">&#41;</span><span class="sy0">;</span>
</pre>

<h3 id="names">Assigning option names</h3>
<p>
	After you've created option object, register it to <span class="code">CommandLine</span> instance and assign it names with <span class="code">AddOption()</span>.
	You can specify multiple names.
</p>
<p>
	Names one character long are classified as short option names, longer names are classified as long option names.
	This means that it is not possible to create a long option with one character long name (e.g. <span class="code">--v</span>).
</p>
<p>
	There are several overloaded versions of <span class="code">AddOption()</span>:
</p>
<pre class="source-csharp"> <span class="kw1">public</span> <span class="kw1">void</span> AddOption<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span><span class="br0">&#40;</span>Option<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> option, <span class="kw1">params</span> <span class="kw4">String</span><span class="br0">&#91;</span><span class="br0">&#93;</span> names<span class="br0">&#41;</span>
 <span class="kw1">public</span> <span class="kw1">void</span> AddOption<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span><span class="br0">&#40;</span>Option<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> option, <span class="kw4">char</span> shortName<span class="br0">&#41;</span>
 <span class="kw1">public</span> <span class="kw1">void</span> AddOption<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span><span class="br0">&#40;</span>Option<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> option, <span class="kw4">char</span> shortName, <span class="kw4">String</span> longName<span class="br0">&#41;</span></pre>
<p>
	Overloaded versions accepting char are there just for convenience, the char is converted to string. The following three lines are equivalent:
</p>
<pre class="source-csharp">
parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, <span class="st0">'v'</span>, <span class="st0">&quot;verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, <span class="st0">&quot;v&quot;</span>, <span class="st0">&quot;verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, new <span class="kw4">string</span>[] &#123; <span class="st0">&quot;v&quot;</span>, <span class="st0">&quot;verbose&quot;</span> &#125; <span class="br0">&#41;</span><span class="sy0">;</span>
</pre>
<p>
	Option names must not be null, at least one option name must be listed and one name cannot be used more than once.
	Option names can contain any characters except for '=', '-' and whitespace characters.
	If option name is invalid, an exception of type <span class="code">InvalidNameException</span> or <span class="code">DuplicateOptionNameException</span> is thrown.
</p>
<p>
	Option names are case-sensitive.
</p>

<h2 id="parameters">Parameters</h2>
<p>
	Option parameters are represented by <span class="code">Parameter&lt;T&gt;</span> instances.
	This is an abstract class and in practise you use derived concrete types.
	The main purpose of classes derived from <span class="code">Parameter&lt;T&gt;</span> is to provide method for conversion from parameter
	value as string to the concrete type <span class="code">T</span>.
	The converted typed value can be accessed with <span class="code">Parameter&lt;T&gt;.Value</span> property.
</p>
<p>
	EasyOpt provides derived classes for several concrete types:
</p>
<ul>
	<li><span class="code">StringParameter</span> performs no conversion and returns the string as is.</li>
	<li><span class="code">IntParameter</span> converts parameter to integer value.</li>
	<li><span class="code">FloatParameter</span> converts parameter to float value.</li>
	<li><span class="code">EnumParameter&lt;T&gt;</span> is generic class that converts parameter value to enum type <span class="code">T</span>.<br />
		If parameter value matches one of the corresponding enum constants, it is converted to that enum constant. Otherwise an exception is thrown.
		The behaviour of conversion is different from <span class="code">Enum.Parse()</span> because only single named constants are accepted; integer values
		or lists of named constants are not converted.<br />
		Case-sensitivity of conversion can be set with <span class="code">EnumParameter&lt;T&gt;.IgnoreCase</span>.
		If <span class="code">T</span> is not an enum type, <span class="code">EnumParameterException</span> is thrown.
	</li>
</ul>

<p>All these classes accept three arguments in their constructors &mdash;
	 whether the option is required (<span class="code">true</span>) or optional (<span class="code">false</span>),
	 name displayed in the usage text and the third, optional, argument sets a default value.
</p>
<p>
	When conversion fails <span class="code">ParameterConversionException</span> is thrown, which is in turn wrapped by parser in <span class="code">OptionParameterException</span>.
</p>
<p>
	Example of usage:
</p>
<pre class="source-csharp">var lineWidthParam <span class="sy0">=</span> <span class="kw3">new</span> IntParameter<span class="br0">&#40;</span><span class="kw1">true</span>, <span class="st0">&quot;WIDTH&quot;</span>, <span class="nu0">80</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw4">enum</span> Color <span class="br0">&#123;</span> Never, Always, Auto <span class="br0">&#125;</span>
var colorParam <span class="sy0">=</span> <span class="kw3">new</span> EnumParameter<span class="sy0">&lt;</span>Color<span class="sy0">&gt;</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;WHEN&quot;</span>, Color.Auto<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
	You can easily define your own parameter types by extending class <span class="code">Parameter&lt;T&gt;</span> and implementing its abstract method <span class="code">T convert(String parameter)</span>.
	It is recommende that in case the conversion fails <span class="code">ParameterConversionException</span> is thrown.
	For an example how a custom parameter can be implemented, see <a href="examples.html#ls"><span class="code">ls</span> example</a>.
</p>

<h2 id="constraints">Constraints</h2>
<p>
	Constraints are used to restrict range of parameter values.
	For example you can define that an option parameter must be a number greater than zero or that a parameter value must be in a certain list of accepted values.
</p>
<p>
	Constraints are classes implementing <span class="code">IConstraint&lt;T&gt;</span> interface and its method <span class="code">bool IsValid(T parameter)</span>.
	As you can see, constraints are applied to parameters after conversion from string to the corresponding parameter type (T).
</p>
<p>
	EasyOpt has several predefined constraints:
</p>
<table cellspacing="0" border="1" cellpadding="4">
	<tr><th>Constraint</th><th>Type</th><th>Description</th></tr>
	<tr><td><span class="code">LowerBoundConstraint</span></td><td><span class="code">int</span></td><td>Parameter value must be grater or equal to the number passed as the only argument of the constructor.</td></tr>
	<tr><td><span class="code">UpperBoundConstraint</span></td><td><span class="code">int</span></td><td>Parameter value must be less or equal to the number passed as the only argument of the constructor.</td></tr>
	<tr><td><span class="code">StringEnumerationConstraint</span></td><td><span class="code">string</span></td><td>Parameter value must be in the specified list of values. This constraint has two overloaded constructors:<br />
			<span class="code">StringEnumerationConstraint(IEnumerable&lt;String&gt; acceptedValues, IEqualityComparer&lt;String&gt; comparer)</span><br />
			<span class="code">StringEnumerationConstraint(IEnumerable&lt;String&gt; acceptedValues, bool ignoreCase)</span><br />
			&mdash;  <span class="code">comparer</span> and <span class="code">ignoreCase</span> parameters can be used to specify the way parameter is compared to members of <span class="code">acceptedValues</span>.
		</td></tr>
	<tr><td><span class="code">ExistingFileConstraint</span></td><td> <span class="code">string</span></td><td>Parameter must be a valid path (relative of absolute) to an existing file.</td></tr>
</table>
<p>
	To apply a constraint to an option parameter, create its instance and register it to the parameter object. You can define multiple constraints for a single parameter.
</p>
<pre class="source-csharp">lineWidthParam.<span class="me1">AddConstraint</span><span class="br0">&#40;</span> <span class="kw3">new</span> LowerBoundConstraint<span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
lineWidthParam.<span class="me1">AddConstraint</span><span class="br0">&#40;</span> <span class="kw3">new</span> UpperBoundConstraint<span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
</pre>
<p>
	Constraints do not apply to the default parameter value.
</p>
<p>
	For an example how a custom constraint can be implemented, see <a href="examples.html#touch"><span class="code">touch</span> example</a>.
</p>

</div>

</body>
</html>
