<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>EasyOpt documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
<style type="text/css">/*<![CDATA[*/
.source-csharp {line-height: normal;}
.source-csharp li, .source-csharp pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for csharp
 * CSS class: source-csharp, CSS id:
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.source-csharp .de1, .source-csharp .de2 {font-family: 'Courier New', Courier, monospace; font-weight: normal; font-style: normal;}
.source-csharp  {}
.source-csharp .head {}
.source-csharp .foot {}
.source-csharp .imp {font-weight: bold; color: red;}
.source-csharp li, .source-csharp li.li1 {font-weight: normal;}
.source-csharp li.li2 {font-weight: bold;}
.source-csharp .kw1 {color: #0600FF;}
.source-csharp .kw2 {color: #FF8000; font-weight: bold;}
.source-csharp .kw3 {color: #008000;}
.source-csharp .kw4 {color: #377B00;}
.source-csharp .kw5 {color: #000000;}
.source-csharp .co1 {color: #666666; font-style: italic;}
.source-csharp .co2 {color: #666666;}
.source-csharp .co3 {color: #666666;}
.source-csharp .coMULTI {color: #008080; font-style: italic;}
.source-csharp .es0 {color: #008080; font-weight: bold;}
.source-csharp .br0 {color: #000000;}
.source-csharp .sy0 {color: #008000;}
.source-csharp .st0 {color: #975026;}
.source-csharp .nu0 {color: #FF0000;}
.source-csharp .me1 {color: #0000FF;}
.source-csharp .me2 {color: #0000FF;}
.source-csharp .ln-xtra, .source-csharp li.ln-xtra, .source-csharp div.ln-xtra {color: #cc0; background-color: #ffc;}
/*]]>*/
</style>
<style type="text/css">/*<![CDATA[*/
pre {
	background-color:#F9F9F9;
	border:1px dashed #2F6FAB;
	color:black;
	line-height:1.1em;
	padding:1em;
}
.code {
	color:black;
	font-family: 'Courier New', Courier, monospace; font-weight: normal; font-style: normal;
}
/*]]>*/
</style>

</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>EasyOpt argument parsing library documentation</h1>
<p>EasyOpt is a library offering an easy-to-use API for work with program options and arguments. It is written in C# (tested with .NET Framework 3.5 SP1) and can be used by any application written for .NET.</p>

<h2>Contents of this document</h2>
<ul>
	<li><a href="#features">Features</a></li>
	<li><a href="#example">Example of usage</a></li>
	<li><a href="#howto">How to use EasyOpt</a>
		<ul>
			<li><a href="#options">Defining program options</a></li>
			<li><a href="#parsing">Parsing arguments</a></li>
			<li><a href="#retrieving">Retrieving option values &amp; non-option arguments</a></li>
		</ul>
	</li>
	<li><a href="#detailed">Detailed description</a></li>
	<li><a href="#moreexamples">More examples</a></li>
</ul>


<h2 id="features">Features</h2>
With EasyOpt you can:
<ul>
	<li>Specify program options, whether an option is optional/required, define multiple synonymous names for an option</li>
	<li>Define option parameters and access their values converted to a proper type</li>
	<li>Apply constraints parameter values</li>
	<li>Validate that options passed by the user are correct and satisfy all constraints</li>
	<li>Retrieve non-option arguments</li>
	<li>Use predefined kinds of parameters and constraints or define your own ones</li>
	<li>Easily generate usage screen</li>
</ul>

<h2 id="example">Example of usage</h2>
<p>Here is a simple example showing how you can use EasyOpt:</p>

<pre class="source-csharp"><span class="kw1">static</span> <span class="kw1">void</span> Main<span class="br0">&#40;</span><span class="kw4">string</span><span class="br0">&#91;</span><span class="br0">&#93;</span> args<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  CommandLine parser <span class="sy0">=</span> <span class="kw3">new</span> CommandLine<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  var verbose <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Be more verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, <span class="st0">'v'</span>, <span class="st0">&quot;verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  var fileParam <span class="sy0">=</span> <span class="kw3">new</span> StringParameter<span class="br0">&#40;</span><span class="kw1">true</span>, <span class="st0">&quot;FILE&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  var file <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Write output to FILE&quot;</span>, fileParam<span class="br0">&#41;</span><span class="sy0">;</span>
  parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>file, <span class="st0">'f'</span>, <span class="st0">&quot;file&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  var lineWidthParam <span class="sy0">=</span> <span class="kw3">new</span> IntParameter<span class="br0">&#40;</span><span class="kw1">true</span>, <span class="st0">&quot;WIDTH&quot;</span>, <span class="nu0">80</span><span class="br0">&#41;</span><span class="sy0">;</span>
  lineWidthParam.<span class="me1">AddConstraint</span><span class="br0">&#40;</span><span class="kw3">new</span> LowerBoundConstraint<span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  var lineWidth <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Wrap lines at WIDTH&quot;</span>, lineWidthParam<span class="br0">&#41;</span><span class="sy0">;</span>
  parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>lineWidth, <span class="st0">&quot;line-width&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  parser.<span class="me1">UsageDescription</span> <span class="sy0">=</span> <span class="st0">&quot;program [OPTION]... [FILE]...&quot;</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">try</span> <span class="br0">&#123;</span>
    parser.<span class="me1">Parse</span><span class="br0">&#40;</span>args<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
  <span class="kw1">catch</span> <span class="br0">&#40;</span>EasyOptException e<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Console.<span class="me1">Write</span><span class="br0">&#40;</span> parser.<span class="me1">GetUsage</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">return</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw4">String</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arguments <span class="sy0">=</span> parser.<span class="me1">GetArguments</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  <span class="kw4">bool</span> isVerbose <span class="sy0">=</span> verbose.<span class="me1">Value</span><span class="sy0">;</span>
  <span class="kw4">String</span> outputFile <span class="sy0">=</span> file.<span class="me1">Value</span><span class="sy0">;</span>
  <span class="kw4">int</span> maxLineWidth <span class="sy0">=</span> lineWidth.<span class="me1">Value</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

The usage screen for the program above would look like this:
<pre>program [OPTION]... [FILE]...

    -v, --verbose
        Be more verbose

    -f, --file=FILE
        Write output to FILE

    --line-width=WIDTH
        Wrap lines at WIDTH</pre>

<h2 id="howto">How to use EasyOpt</h2>
<p>In order to start using EasyOpt, you need to add reference to EasyOpt library .dll file to your project.
	All classes that EasyOpt consists of are in namespace EasyOpt. In C# you can import this namespace with
</p>
<pre>using EasyOpt;</pre>
<p>Using the library to parse program arguments can be divided in three steps:</p>
<ol>
	<li>Define program options, their parameters and constraints.</li>
	<li>Parse arguments from the command line.</li>
	<li>Retrieve values of options and non-option arguments.</li>
</ol>

<h3 id="options">Defining program options</h3>
<p>
	First, you need to create an instance of <span class="code">CommandLine</span>:
</p>
<pre  class="source-csharp">CommandLine parser <span class="sy0">=</span> <span class="kw3">new</span> CommandLine<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>
	Each option is represented by an instance of generic class <span class="code">Option&lt;T&gt;</span>.
	To create an instance of <span class="code">Option&lt;T&gt;</span>, use factory methods provided by <span class="code">OptionFactory</span>.
</p>
<p>
	There are two basic types of options: with and without an option parameter.
</p>
<p>
	To create an option without a parameter, you simply call <span class="code">OptionFactory.Create()</span> with two arguments &mdash;
	the first one specifies whether the option is required (<span class="code">true</span>) or optional (<span class="code">false</span>),
	the second one contains option description for usage text. Example:
</p>
<pre class="source-csharp">var verbose <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Be more verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>In order to create an option with a parameter, you need to create instance of  class <span class="code">Parameter&lt;T&gt;</span>.
	This is an abstract generic class. EasyOpt provides derived classes for several concrete types:
	<span class="code">StringParameter</span>, <span class="code">IntParameter</span>, <span class="code">FloatParameter</span> and <span class="code">EnumParameter&lt;T&gt;</span>.
	Each of these classes automatically convert parameter value to their respective type &mdash; <span class="code">string</span>, <span class="code">int</span>, <span class="code">float</span> and an enum type <span class="code">T</span>.
</p>
<p>In constructors for these classes, you provide three arguments &mdash;
	 whether the option is required (<span class="code">true</span>) or optional (<span class="code">false</span>),
	 name displayed in the usage text and default value. Example:
</p>
<pre class="source-csharp">var lineWidthParam <span class="sy0">=</span> <span class="kw3">new</span> IntParameter<span class="br0">&#40;</span><span class="kw1">true</span>, <span class="st0">&quot;WIDTH&quot;</span>, <span class="nu0">80</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>
	Next you create an option object the same way as in case of an option without a parameter, but you pass <span class="code">Parameter&lt;T&gt;</span>
	object as the third argument of <span class="code">OptionFactory.Create()</span>. This method is generic, but thanks to type inference in C# you don't need
	to specify the type explicitely. Thus the following two lines of code are equivalent:
</p>
<pre class="source-csharp">
var lineWidth <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span><span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Wrap lines at WIDTH&quot;</span>, lineWidthParam<span class="br0">&#41;</span><span class="sy0">;</span>
Option&lt;<span class="kw4">int</span>&gt; lineWidth <span class="sy0">=</span> OptionFactory.<span class="me1">Create</span>&lt;<span class="kw4">int</span>&gt;<span class="br0">&#40;</span><span class="kw1">false</span>, <span class="st0">&quot;Wrap lines at WIDTH&quot;</span>, lineWidthParam<span class="br0">&#41;</span><span class="sy0">;</span>
</pre>
<p>Finally you register the option object to <span class="code">CommandLine</span> instance and assign it names with <span class="code">AddOption()</span>.
	You can specify multiple names. Names one character long are processed as short option names, longer names are processed as long option names.
	For convenience there are several overloaded versions of <span class="code">AddOption()</span>. The following lines are equivalent:
</p>
<pre class="source-csharp">
parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, <span class="st0">'v'</span>, <span class="st0">&quot;verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, <span class="st0">&quot;v&quot;</span>, <span class="st0">&quot;verbose&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
parser.<span class="me1">AddOption</span><span class="br0">&#40;</span>verbose, new <span class="kw4">string</span>[] &#123; <span class="st0">&quot;v&quot;</span>, <span class="st0">&quot;verbose&quot;</span> &#125; <span class="br0">&#41;</span><span class="sy0">;</span>
</pre>
<p>
	The last feature EasyOpt provides for options and parameters are constraints. Constraints define what parameter values are valid.
	For example you can define that an option parameter must be a number greater than zero or that a parameter value must be in a certain list of accepted values.
	In EasyOpt, constraints are classes implementing <span class="code">IConstraint&lt;T&gt;</span> interface. EasyOpt has several predefined constraints &mdash;
	<span class="code">LowerBoundConstraint</span>, <span class="code">UpperBoundConstraint</span>, <span class="code">StringEnumerationConstraint</span> and
	<span class="code">ExistingFileConstraint</span>.
	Every constraint must define method <span class="code">IsValid(T parameter)</span>. It accepts parameter value converted to a proper type (e.g. <span class="code">int</span> for <span class="code">IntParameter</span>).
	If <span class="code">IsValid()</span> returns true, the parameter is accepted, otherwise the parser throws an exception.
</p>
<p>
	To apply a constraint to an option parameter, create its instance and register it to the parameter object. You can define multiple constraints for a single parameter.
</p>
<pre class="source-csharp">lineWidthParam.<span class="me1">AddConstraint</span><span class="br0">&#40;</span> <span class="kw3">new</span> LowerBoundConstraint<span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
lineWidthParam.<span class="me1">AddConstraint</span><span class="br0">&#40;</span> <span class="kw3">new</span> UpperBoundConstraint<span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
</pre>

<h3 id="parsing">Parsing arguments</h3>
<p>
	After you've set all options, it's time to get to the actual argument parsing. You do that simply by calling <span class="code">CommandLine.Parse()</span>.
	As its only argument you pass arguments from the command line in a string array:
</p>
<pre class="source-csharp">parser.<span class="me1">Parse</span><span class="br0">&#40;</span>args<span class="br0">&#41;</span><span class="sy0">;</span></pre>
<p>If the parsed options do not comply with option settings (e.g. unknown option name, option parameter doesn't satisfy a constraint etc.), an exception
	is thrown. All parsing exceptions are derived from <span class="code">EasyOptException</span>, so that you can easily catch them and display the usage text:
</p>
<pre class="source-csharp"><span class="kw1">try</span> <span class="br0">&#123;</span>
  parser.<span class="me1">Parse</span><span class="br0">&#40;</span>args<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">catch</span> <span class="br0">&#40;</span>EasyOptException e<span class="br0">&#41;</span> <span class="br0">&#123;</span>
  Console.<span class="me1">Write</span><span class="br0">&#40;</span> parser.<span class="me1">GetUsage</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
<p>
You can customize the usage text by setting <span class="Code">CommandLine.UsageDescription</span> property.
<span class="code">GetUsage()</span> returns value of <span class="Code">CommandLine.UsageDescription</span> plus description of all registered options.
</p>

<h3 id="retrieving">Retrieving option values &amp; non-option arguments</h3>
<p>
	After you've called <span class="code">Parse()</span> method, option and parameter instances are filled with the parsed values.
	You can find out whether an option was present among the parsed arguments using <span class="code">IsPresent</span> property:
</p>
<pre class="source-csharp"><span class="kw4">bool</span> isVerbose <span class="sy0">=</span> verbose.<span class="me1">IsPresent</span><span class="sy0">;</span></pre>
<p>
	To retrieve a parameter value, use <span class="code">Parameter&lt;T&gt;.Value</span> property. If the value hasn't been specified in the parsed arguments, it returns the default value.
</p>
<pre class="source-csharp"><span class="kw4">int</span> maxLineWidth <span class="sy0">=</span> lineWidthParam.<span class="me1">Value</span><span class="sy0">;</span></pre>
<p>
	Since in case of options without a parameter, one is usually interested in <span class="code">IsPresent</span> value and in case of options with a parameter, one is interested in the parameter's value,
	you can easily access the relevant information uniformly with <span class="code">Option&lt;T&gt;.Value</span> property:
</p>
<pre class="source-csharp"><span class="kw4">bool</span> isVerbose <span class="sy0">=</span> verbose.<span class="me1">Value</span><span class="sy0">;</span>
<span class="kw4">int</span> maxLineWidth <span class="sy0">=</span> lineWidth.<span class="me1">Value</span><span class="sy0">;</span>
</pre>
<p>
	Non-option arguments can be retrieved as a string array:
</p>
<pre class="source-csharp"><span class="kw4">String</span><span class="br0">&#91;</span><span class="br0">&#93;</span> arguments <span class="sy0">=</span> parser.<span class="me1">GetArguments</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<h2 id="detailed">Detailed description</h2>
<p>You can find more detailed description of EasyOpt in the following sections:</p>
<ul>
	<li><a href="configuring_options.html">Configuring options</a></li>
	<li><a href="argument_parsing.html">Argument parsing</a></li>
	<li><a href="retrieving_values.html">Retrieving values &amp; arguments</a></li>
</ul>

<h2 id="moreexamples">More examples</h2>
<p>
	More examples of how EasyOpt can be used can be found on a <a href="examples.html">special page</a>.
</p>

</div>

</body>
</html>
